(this["webpackJsonpupload-progress"]=this["webpackJsonpupload-progress"]||[]).push([[0],{19:function(e,t,a){e.exports={wrapperItem:"UploadItem_wrapperItem__24nFt",leftSide:"UploadItem_leftSide__2Q3i-",progressBar:"UploadItem_progressBar__We0TS",percentage:"UploadItem_percentage__3QLpF"}},41:function(e,t,a){e.exports={wrapper:"UploadProgress_wrapper__2mmbM",closeButton:"UploadProgress_closeButton__1_kL5"}},42:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},43:function(e,t,a){e.exports=a(74)},52:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),o=a.n(l),c=a(17),s=a(12),i=a(40),u=(a(52),a(14)),m=a(11),p=a.n(m),d=a(26),E=a.n(d),f={SET_UPLOAD_FILE:"SET_UPLOAD_FILE",SET_UPLOAD_PROGRESS:"SET_UPLOAD_PROGRESS",SUCCESS_UPLOAD_FILE:"SUCCESS_UPLOAD_FILE",FAILURE_UPLOAD_FILE:"FAILURE_UPLOAD_FILE"},g=function(e,t){return{type:f.SET_UPLOAD_PROGRESS,payload:{id:e,progress:t}}},v=function(e){return{type:f.FAILURE_UPLOAD_FILE,payload:e}},b=a(15),O=a(2),h=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null},_=function(){return sessionStorage.getItem("token")||null},S=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},j=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))};var P=function(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],l=a[1];return{value:r,onChange:function(e){l(e.target.value)}}},L=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],o=a[1],c=P(""),s=P(""),i=Object(n.useState)(null),m=Object(u.a)(i,2),d=m[0],E=m[1];return r.a.createElement("div",null,"Login",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Username",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"text"},c,{autoComplete:"new-password"}))),r.a.createElement("div",{style:{marginTop:10}},"Password",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"password"},s,{autoComplete:"new-password"}))),d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{style:{color:"red"}},d),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:l?"Loading...":"Login",onClick:function(){E(null),o(!0),p.a.post("http://localhost:5000/users/signin",{username:c.value,password:s.value}).then((function(t){o(!1),j(t.data.token,t.data.user),e.history.push("/dashboard")})).catch((function(e){o(!1),401===e.response.status?E(e.response.data.message):E("Something went wrong. Please try again later.")}))},disabled:l}),r.a.createElement("br",null))};var U=function(e){var t=h();return r.a.createElement("div",null,"Welcome ",t.name,"!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"button",onClick:function(){S(),e.history.push("/login")},value:"Logout"}),r.a.createElement("div",null))};var y=function(){return r.a.createElement("div",null,"Welcome to the Home Page!")},w=a(22);var I=function(e){var t=e.component,a=Object(w.a)(e,["component"]);return r.a.createElement(O.b,Object.assign({},a,{render:function(e){return _()?r.a.createElement(t,e):r.a.createElement(O.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var A=function(e){var t=e.component,a=Object(w.a)(e,["component"]);return r.a.createElement(O.b,Object.assign({},a,{render:function(e){return _()?r.a.createElement(O.a,{to:{pathname:"/dashboard"}}):r.a.createElement(t,e)}}))};var F=function(e){var t=Object(n.useState)(!0),a=Object(u.a)(t,2),l=a[0],o=a[1];return Object(n.useEffect)((function(){var e=_();e&&p.a.get("http://localhost:5000/verifyToken?token=".concat(e)).then((function(e){j(e.data.token,e.data.user),o(!1)})).catch((function(e){S(),o(!1)}))}),[]),l&&_()?r.a.createElement("div",{className:"content"},"Checking Authentication..."):r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement("nav",{className:"blue darken-4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(b.b,{exact:!0,activeClassName:"active",to:"/"},"Home"),r.a.createElement("div",null),r.a.createElement(b.b,{activeClassName:"active",to:"/login"},"Login"),r.a.createElement("small",null),r.a.createElement("div",null),r.a.createElement(b.b,{activeClassName:"active",to:"/dashboard"},"Dashboard"),r.a.createElement("small",null)))),r.a.createElement("div",{className:"content"},r.a.createElement(O.d,null,r.a.createElement(O.b,{exact:!0,path:"/",component:y}),r.a.createElement(A,{path:"/login",component:L}),r.a.createElement(I,{path:"/dashboard",component:U})))))},k=a(16),N=a(19),C=a.n(N),D=function(e){var t=e.file,a=t.file,n=t.progress;return r.a.createElement("div",{className:C.a.wrapperItem},r.a.createElement("div",{className:C.a.leftSide},r.a.createElement("div",{className:C.a.progressBar},r.a.createElement("div",{style:{width:"".concat(n,"%")}})),r.a.createElement("label",null,a.name)),r.a.createElement("span",{className:C.a.percentage},n,"%"))},R=a(41),T=a.n(R),x=Object(c.b)((function(e){return{fileProgress:e.UploadFile.fileProgress}}),(function(e){return{uploadFile:function(t){return e(function(e){return function(t){e.length&&e.forEach((function(e){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).append("file",e.file),n.prev=2,n.next=5,E.a.awrap(p()({baseURL:"http://localhost:5000",url:"/file",method:"post",data:a,onUploadProgress:function(a){var n=a.loaded,r=a.total,l=Math.floor(n/r*100);t(g(e.id,l))}}));case 5:t((r=e.id,{type:f.SUCCESS_UPLOAD_FILE,payload:r})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t(v(e.id));case 11:case"end":return n.stop()}var r}),null,null,[[2,8]])}))}}(t))}}}))((function(e){var t=e.fileProgress,a=e.uploadFile,l=Object(k.size)(t);return Object(n.useEffect)((function(){var e=Object(k.toArray)(t).filter((function(e){return 0===e.progress}));a(e)}),[l]),l>0?r.a.createElement("div",{className:T.a.wrapper},r.a.createElement("h4",null,"Uploading File"),Object(k.size)(t)?Object(k.toArray)(t).map((function(e){return r.a.createElement(D,{key:e.id,file:e})})):null):null})),B=a(42),W=a.n(B);a(73);var G=Object(c.b)(null,(function(e){return{setUploadFile:function(t){return e({type:f.SET_UPLOAD_FILE,payload:t})}}}))((function(e){var t=Object(n.useState)(!0),a=Object(u.a)(t,2),l=a[0],o=a[1];return Object(n.useEffect)((function(){var e=_();e&&p.a.get("http://localhost:5000/verifyToken?token=".concat(e)).then((function(e){j(e.data.token,e.data.user),o(!1)})).catch((function(e){S(),o(!1)}))}),[]),l&&_()?r.a.createElement("div",{className:"content"},"Checking Authentication..."):r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:W.a,className:"App-logo",alt:"logo"}),r.a.createElement("input",{type:"file",multiple:!0,onChange:function(t){e.setUploadFile(t.target.files),t.target.value=""}})),r.a.createElement(x,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(13),z=a(4),M=function(e,t){for(var a={},n=0;n<t.length;n++){var r=Object(k.size)(e)+n+1;a=Object(z.a)({},a,Object(J.a)({},r,{id:r,file:t[n],progress:0}))}return a},H={fileProgress:{}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SET_UPLOAD_FILE:return Object(z.a)({},e,{fileProgress:Object(z.a)({},e.fileProgress,{},M(e.fileProgress,t.payload))});case f.SET_UPLOAD_PROGRESS:return Object(z.a)({},e,{fileProgress:Object(z.a)({},e.fileProgress,Object(J.a)({},t.payload.id,Object(z.a)({},e.fileProgress[t.payload.id],{progress:t.payload.progress})))});case f.SUCCESS_UPLOAD_FILE:return Object(z.a)({},e,{fileProgress:Object(z.a)({},e.fileProgress,Object(J.a)({},t.payload,Object(z.a)({},e.fileProgress[t.payload],{status:1})))});case f.FAILURE_UPLOAD_FILE:return Object(z.a)({},e,{fileProgress:Object(z.a)({},e.fileProgress,Object(J.a)({},t.payload,Object(z.a)({},e.fileProgress[t.payload],{status:0,progress:0})))});default:return e}},X=Object(s.c)({UploadFile:Q}),V=[i.a],$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,q=Object(s.e)(X,$(s.a.apply(void 0,V)));o.a.render(r.a.createElement(c.a,{store:q},r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.af9905e6.chunk.js.map